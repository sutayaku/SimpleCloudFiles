(function(t){function e(e){for(var n,c,r=e[0],s=e[1],l=e[2],d=0,p=[];d<r.length;d++)c=r[d],Object.prototype.hasOwnProperty.call(a,c)&&a[c]&&p.push(a[c][0]),a[c]=0;for(n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n]);u&&u(e);while(p.length)p.shift()();return i.push.apply(i,l||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,r=1;r<o.length;r++){var s=o[r];0!==a[s]&&(n=!1)}n&&(i.splice(e--,1),t=c(c.s=o[0]))}return t}var n={},a={app:0},i=[];function c(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,c),o.l=!0,o.exports}c.m=t,c.c=n,c.d=function(t,e,o){c.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},c.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},c.t=function(t,e){if(1&e&&(t=c(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(c.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)c.d(o,n,function(e){return t[e]}.bind(null,n));return o},c.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return c.d(e,"a",e),e},c.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},c.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],s=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=s;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},"034f":function(t,e,o){"use strict";o("85ec")},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d"),o("d3b7");var n=o("2b0e"),a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("router-view")},i=[],c=o("bc3a"),r=o.n(c),s={name:"App",components:{},methods:{login:function(){var t="/api/login/login",e={account:"admin",password:"2021"};r.a.post(t,e).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))},getData:function(){var t="/api/space/test";r.a.get(t).then((function(t){console.log(t)})).catch((function(t){console.log(t)}))}}},l=s,u=(o("034f"),o("2877")),d=Object(u["a"])(l,a,i,!1,null,null,null),p=d.exports,f=o("8c4f"),m=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{staticStyle:{height:"100%"}},[o("el-dialog",{attrs:{title:"登录",visible:t.dialogFormVisible,"close-on-click-modal":!1,"close-on-press-escape":!1,"show-close":!1,center:!0},on:{"update:visible":function(e){t.dialogFormVisible=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[o("span",{staticClass:"dialog-footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.login}},[t._v("登录")])],1)]},proxy:!0}])},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"账户","label-width":t.formLabelWidth}},[o("el-input",{model:{value:t.form.account,callback:function(e){t.$set(t.form,"account",e)},expression:"form.account"}})],1),o("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth}},[o("el-input",{attrs:{type:"","show-password":""},model:{value:t.form.password,callback:function(e){t.$set(t.form,"password",e)},expression:"form.password"}})],1)],1)],1)],1)},h=[],g=function(){var t="",e={checkLogin:"".concat(t,"/api/Login/CheckLogin"),login:"".concat(t,"/api/Login/Login"),logout:"".concat(t,"/api/Login/Logout"),accountInfo:"".concat(t,"/api/Account/Info"),accountUpdate:"".concat(t,"/api/Account/Update"),upload:"".concat(t,"/api/File/Upload"),download:"".concat(t,"/api/File"),getList:"".concat(t,"/api/Space/GetList"),createDir:"".concat(t,"/api/Space/CreateDir"),delete:"".concat(t,"/api/Space/Delete")};return e}(),v=g,w={name:"Login",data:function(){return{form:{account:"",password:""},formLabelWidth:"120px",dialogFormVisible:!0}},created:function(){this.checkLogin()},methods:{login:function(){var t=v.login,e=this;r.a.post(t,this.form).then((function(t){1==t.data.code?e.$router.push("/"):e.$message.error("错误的账号或密码")})).catch((function(t){console.log(t)}))},checkLogin:function(){var t=this;r.a.get(v.checkLogin).then((function(e){1==e.data.code&&t.$router.push("/")})).catch((function(t){console.log(t)}))}}},b=w,y=Object(u["a"])(b,m,h,!1,null,null,null),D=y.exports,_=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("el-container",{staticStyle:{height:"100%"}},[o("el-header",{staticStyle:{"margin-top":"10px",height:"30px"}},[o("el-row",[o("el-col",{attrs:{span:12}},[o("h2",[o("span",[o("i",{staticClass:"el-icon-folder-opened"}),t._v(" "+t._s(t.dirName))])])]),o("el-col",{attrs:{span:12}},[o("el-menu",{staticClass:"el-menu-demo",staticStyle:{float:"right"},attrs:{"default-active":"1",mode:"horizontal"}},[o("el-submenu",{attrs:{index:"1"}},[o("template",{slot:"title"},[o("i",{staticClass:"el-icon-s-custom"}),o("span",[t._v(t._s(t.accountInfo.userName)+"，欢迎")])]),o("el-menu-item",{attrs:{index:"1-1"},on:{click:t.showEditAccount}},[o("i",{staticClass:"el-icon-edit"}),o("span",[t._v("修改账户与密码")])]),o("el-menu-item",{attrs:{index:"1-3"},on:{click:t.onLogout}},[o("i",{staticClass:"el-icon-s-promotion"}),o("span",[t._v("登出")])])],2)],1)],1)],1)],1),o("el-main",[o("el-button-group",[o("el-button",{attrs:{type:"primary",icon:"el-icon-s-home"},on:{click:t.toHome}},[t._v("首页")]),o("el-button",{attrs:{type:"primary",icon:"el-icon-caret-top"},on:{click:t.toPerv}},[t._v("上一层")]),o("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:t.showUpload}},[t._v("上传")]),o("el-button",{attrs:{type:"primary",icon:"el-icon-folder-add"},on:{click:t.showAddDirDialog}},[t._v("新建")])],1),o("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:t.tableData}},[o("el-table-column",{attrs:{label:"名称"},scopedSlots:t._u([{key:"default",fn:function(e){return["file"==e.row.type?o("i",{staticClass:"el-icon-document"}):t._e(),"dir"==e.row.type?o("i",{staticClass:"el-icon-folder"}):t._e(),t._v(" "+t._s(e.row.name)+" ")]}}])}),o("el-table-column",{attrs:{prop:"fileSize",label:"大小"}}),o("el-table-column",{attrs:{prop:"createTime",label:"日期"}}),o("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return["file"==e.row.type?o("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(o){return t.onDownload(e.row)}}},[t._v("下载")]):t._e(),"dir"==e.row.type?o("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(o){return t.onInDir(e.row)}}},[t._v("进入")]):t._e(),o("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(o){return t.onDelete(e.row)}}},[t._v(" 删除 ")])]}}])})],1),o("el-dialog",{attrs:{title:"上传",visible:t.showUploadDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.showUploadDialog=e}}},[o("CFUploader",{on:{complete:t.onUploadComplete}})],1),o("el-dialog",{attrs:{title:"创建目录",visible:t.showCreateDirDialog,width:"300px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.showCreateDirDialog=e}}},[o("el-form",{attrs:{model:t.form}},[o("el-form-item",{attrs:{label:"目录名称"}},[o("el-input",{attrs:{autocomplete:"off"},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name",e)},expression:"form.name"}})],1)],1),o("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[o("el-button",{on:{click:function(e){t.showCreateDirDialog=!1}}},[t._v("取 消")]),o("el-button",{attrs:{type:"primary"},on:{click:t.onAddDir}},[t._v("确 定")])],1)],1),o("el-dialog",{attrs:{title:"账户与密码修改",visible:t.showEditAccountDialog,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.showEditAccountDialog=e}},scopedSlots:t._u([{key:"footer",fn:function(){return[o("span",{staticClass:"dialog-footer"},[o("el-button",{attrs:{type:"primary"},on:{click:t.onEditAccount}},[t._v("修改")])],1)]},proxy:!0}])},[o("el-form",{attrs:{model:t.accountForm}},[o("el-form-item",{attrs:{label:"账户"}},[o("el-input",{model:{value:t.accountForm.account,callback:function(e){t.$set(t.accountForm,"account",e)},expression:"accountForm.account"}})],1),o("el-form-item",{attrs:{label:"密码"}},[o("el-input",{attrs:{type:"","show-password":""},model:{value:t.accountForm.password,callback:function(e){t.$set(t.accountForm,"password",e)},expression:"accountForm.password"}})],1)],1)],1)],1)],1)},x=[],k=(o("99af"),o("159b"),o("b0c0"),o("498a"),o("b680"),function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("uploader",{staticClass:"uploader-example",attrs:{options:t.options,"file-status-text":t.fileStatusText,autoStart:!1},on:{"file-added":t.onFileAdded,complete:t.onComplete}},[o("uploader-unsupport"),o("uploader-drop",[o("p",[t._v("拖文件到这里上传 或")]),o("uploader-btn",[t._v("选择文件")])],1),o("uploader-list")],1)}),I=[],C=o("69a0"),F=o.n(C),$={success:"上传成功",error:"上传出错了",uploading:"上传中...",paused:"暂停",waiting:"等待中...",cmd5:"计算md5..."},S={},A={data:function(){return{fileStatusText:function(t){return $[t]},options:{target:"/api/File/Upload",withCredentials:!0,chunkSize:2097152,checkChunkUploadedByResponse:function(t,e){var o=JSON.parse(e);return 1==o.code&&o.data.exists},processParams:function(t){return t.dirId=S.$store.state.dirId,t}}}},created:function(){S=this},methods:{onFileAdded:function(t){this.computeMD5(t)},computeMD5:function(t){var e=this,o=1024,n=5120,a=File.prototype.slice||File.prototype.mozSlice||File.prototype.webkitSlice,i=new F.a.ArrayBuffer,c=[];if(t.dirId=this.$store.state.dirId,t.cmd5=!0,t.size<n)c.push(a.call(t.file,0,t.size-1));else{c.push(a.call(t.file,0,o));var r=Math.floor(t.size/2)-512;c.push(a.call(t.file,r,r+o)),r=t.size-o-1,c.push(a.call(t.file,r,r+o))}var s=0,l=new FileReader;function u(){l.readAsArrayBuffer(c[s])}l.onload=function(e){if(i.append(e.target.result),s++,s<c.length)u();else{var o=i.end();i.destroy(),t.uniqueIdentifier=o,t.cmd5=!1,t.resume()}},l.onError=function(){e.$message.error("出现了错误！停止上传！"),t.cancel()},u()},onComplete:function(){this.$emit("complete")}}},L=A,O=L,U=(o("c630"),Object(u["a"])(O,k,I,!1,null,null,null)),j=U.exports,z={name:"Home",components:{CFUploader:j},data:function(){return{accountInfo:{userName:"",isInit:!1},showUploadDialog:!1,showCreateDirDialog:!1,showEditAccountDialog:!1,loading:!1,prevDirId:"",dirId:"",dirName:"首页",tableData:[],form:{name:""},accountForm:{account:"",password:""}}},created:function(){this.getAccountInfo(),this.loadData()},methods:{loadData:function(){var t=this;t.loading=!0,r.a.get("".concat(v.getList,"?dirId=").concat(this.dirId)).then((function(e){t.loading=!1;var o=e.data.data.datas;o.forEach((function(e){"file"==e.type?e.fileSize=t.byteconvert(e.size):e.fileSize="-"})),t.tableData=o,t.prevDirId=e.data.data.prevDirId,t.dirId=e.data.data.dirId,t.dirName=e.data.data.dirName,t.$store.commit("changeDirId",t.dirId)}))},getAccountInfo:function(){var t=this;r.a.get(v.accountInfo).then((function(e){t.accountInfo.userName=e.data.data.userName,t.accountInfo.isInit=e.data.data.isInit}))},onInDir:function(t){this.dirId=t.id,this.loadData()},toHome:function(){this.dirId="",this.loadData()},toPerv:function(){this.dirId=this.prevDirId,this.loadData()},showUpload:function(){this.showUploadDialog=!0},showAddDirDialog:function(){this.showCreateDirDialog=!0,this.form.name=""},showEditAccount:function(){this.showEditAccountDialog=!0,this.accountForm.account="",this.accountForm.password=""},onAddDir:function(){if(this.showCreateDirDialog)if(""!=this.form.name.trim()){this.showCreateDirDialog=!1;var t={parentId:this.dirId,name:this.form.name},e=this;r.a.post(v.createDir,t).then((function(t){1==t.data.code&&(e.loadData(),e.$message.success("创建成功"))}))}else this.$message.warning("不可输入空值")},onDelete:function(t){var e=this,o=v.delete+"/".concat(t.type,"/").concat(t.id),n="确定要删除该文件吗？";"dir"==t.type&&(n="删除目录夹会删除目录内所有文件及目录，确定删除吗？"),this.$confirm(n,"确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){r.a.delete(o).then((function(t){1==t.data.code?(e.$message.success("删除成功"),e.loadData()):e.$message.warning(t.data.msg)})).catch((function(t){console.log(t)}))}))},onDownload:function(t){var e=v.download+"/"+t.id;window.open(e)},onLogout:function(){var t=this;this.$confirm("您确定要登出吗？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){r.a.get(v.logout).then((function(){t.$router.push("/Login")}))}))},onEditAccount:function(){var t=this;t.accountForm.account=t.accountForm.account.trim(),t.accountForm.password=t.accountForm.password.trim(),""!=t.accountForm.account&&""!=t.accountForm.password&&-1==t.accountForm.account.indexOf(" ")&&-1==t.accountForm.password.indexOf(" ")?this.$confirm("修改后会登出系统需要重新登录，是否继续操作？","确认信息",{distinguishCancelAndClose:!0,confirmButtonText:"确定",cancelButtonText:"取消"}).then((function(){r.a.post(v.accountUpdate,t.accountForm).then((function(e){0==e.data.code?t.$message.warning(e.data.msg):(t.$message.success("修改成功"),t.$router.push("/Login"))}))})):t.$$message.warning("账号和密码不可为空或使用空格！")},onUploadComplete:function(){this.loadData()},byteconvert:function(t){var e=0,o=1024,n="BKMGT";while(t>o)t/=o,e++;return t.toFixed(1)+n.charAt(e)}}},E=z,T=Object(u["a"])(E,_,x,!1,null,null,null),P=T.exports;n["default"].use(f["a"]);var B=[{path:"/",component:P},{path:"/login",component:D}],N=new f["a"]({routes:B}),M=N,H=o("2f62");n["default"].use(H["a"]);var J=new H["a"].Store({state:function(){return{dirId:""}},mutations:{changeDirId:function(t,e){t.dirId=e}}}),V=J,W=o("ef55"),G=o.n(W),R=o("5c96"),q=o.n(R);o("0fae");n["default"].config.productionTip=!1,r.a.defaults.headers.post["Content-Type"]="application/json",r.a.defaults.withCredentials=!0,r.a.interceptors.response.use((function(t){return t}),(function(t){return 401==t.response.status&&M.push("/Login"),Promise.reject(t)})),n["default"].use(q.a),n["default"].use(G.a),n["default"].use(r.a),new n["default"]({router:M,store:V,render:function(t){return t(p)}}).$mount("#app")},"85ec":function(t,e,o){},c630:function(t,e,o){"use strict";o("c9f0")},c9f0:function(t,e,o){}});
//# sourceMappingURL=app.js.map